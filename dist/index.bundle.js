"use strict";(self.webpackChunkasteroidsjs=self.webpackChunkasteroidsjs||[]).push([[826],{931:()=>{const t=class{constructor(t,i,s,e,h,o){this.x=t,this.y=i,this.dx=s,this.dy=e,this.jerk=o,this.orientation=h,this.color="#000000",this.maxD=.5}getX(){return this.x}getY(){return this.y}setX(t){this.x=t}setY(t){this.y=t}setO(t){this.orientation=t}setDx(t){this.dx=t}setDy(t){this.dy=t}updatePosition(t,i,s){this.x+=this.dx*s,this.y+=this.dy*s,this.x<0&&this.setX(t),this.x>t&&this.setX(0),this.y<0&&this.setY(i),this.y>i&&this.setY(0)}accelerate(t){var i=this.mathifyOrientation();this.dx+=Math.cos(i)/this.jerk*t,this.dy-=Math.sin(i)/this.jerk*t,this.dx>this.maxD&&(this.dx=this.maxD),this.dx<-this.maxD&&(this.dx=-this.maxD),this.dy>this.maxD&&(this.dy=this.maxD),this.dy<-this.maxD&&(this.dy=-this.maxD)}decelerate(t){var i=this.mathifyOrientation();this.dx-=Math.cos(i)/this.jerk*t,this.dy+=Math.sin(i)/this.jerk*t,this.dx>this.maxD&&(this.dx=this.maxD),this.dx<-this.maxD&&(this.dx=-this.maxD),this.dy>this.maxD&&(this.dy=this.maxD),this.dy<-this.maxD&&(this.dy=-this.maxD)}mathifyOrientation(){return(90-this.orientation)*(Math.PI/180)}rotate(t){this.orientation+=t}checkCollision(t){var i=this.getBounds();for(let s=0;s<i.length;s++)if(i[s].x>t.x-t.w/2&&i[s].x<t.x+t.w/2&&i[s].y>t.y-t.h/2&&i[s].y<t.y+t.h/2)return!0;return!1}},i=class extends t{constructor(t,i,s,e,h){super(t,i,s,e,0,0),this.h=4,this.w=4,this.frame=h,this.time=0}getBounds(){return[{x:this.x-this.w/2,y:this.y-this.h/2},{x:this.x+this.w/2,y:this.y-this.h/2},{x:this.x+this.w/2,y:this.y+this.h/2},{x:this.x-this.w/2,y:this.y+this.h/2}]}checkDistance(t){if(this.time<2&&this.frame==t&&this.time++,this.time>1)return!0}};class s extends t{constructor(t,i,s,e,h,o){super(t,i,s,e,0,10),this.size=h,this.numSides=o,this.r=5*this.size,this.maxR=0,this.bounds=this.genBounds(),this.h=2*this.maxR,this.w=2*this.maxR}genBounds(){var t=[];for(let s=0;s<this.numSides;s++){var i=Math.random()*this.r+this.r;this.checkMaxR(i),t.push({x:i*Math.cos(2*s*Math.PI/this.numSides),y:i*Math.sin(2*s*Math.PI/this.numSides)})}return t.push(t[0]),t}getBounds(){return this.bounds}checkMaxR(t){t>this.maxR&&(this.maxR=t)}split(){if(this.size-1==0)return 0;var t=this.size-1;return[new s(this.x,this.y,this.dx,-1*this.dy,t,this.numSides),new s(this.x,this.y,-1*this.dx,this.dy,t,this.numSides)]}}const e=s,h=class{constructor(t,i){this.sound=document.createElement("audio"),this.sound.src=t,this.sound.volume=i,this.sound.setAttribute("preload","auto"),this.sound.setAttribute("controls","none"),this.sound.style.display="none",document.body.appendChild(this.sound)}play(){this.sound.play()}stop(){this.sound.pause()}};console.log("loading scene...");let o=new function(t){this.canvas=document.getElementById(t),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.setBackground=function(t){this.context.fillStyle=t,this.context.fillRect(0,0,this.width,this.height)},this.drawSpaceship=function(t){this.context.fillStyle=t.color,this.context.translate(t.x,t.y),this.context.rotate(t.orientation*Math.PI/180),this.context.beginPath(),this.context.moveTo(0,-t.h/2),this.context.lineTo(-t.w/2,t.h/2),this.context.lineTo(t.w/2,t.h/2),this.context.fill(),this.context.rotate(-t.orientation*Math.PI/180),this.context.setTransform(1,0,0,1,0,0)},this.drawAsteroids=function(t,i){this.context.strokeStyle="#FFFFFF",this.context.lineWidth=1,this.context.translate(t.x,t.y),this.context.beginPath(),this.context.moveTo(i[0].x,i[0].y);for(let s=1;s<t.numSides+1;s++)this.context.lineTo(i[s].x,i[s].y);this.context.stroke(),this.context.setTransform(1,0,0,1,0,0)},this.drawBullets=function(t){this.context.fillStyle="#FFFFFF",this.context.translate(t.x,t.y),this.context.beginPath(),this.context.lineTo(-t.w/2,-t.h/2),this.context.lineTo(t.w/2,-t.h/2),this.context.lineTo(t.w/2,t.h/2),this.context.lineTo(-t.w/2,t.h/2),this.context.fill(),this.context.setTransform(1,0,0,1,0,0)},this.drawScore=function(t){this.context.font="20px Turret Road",this.context.fillStyle="white",this.context.textAlign="center",this.context.fillText(t,this.width/2,20)},this.drawHigh=function(t){this.context.font="20px Turret Road",this.context.fillStyle="white",this.context.textAlign="right",this.context.fillText(t,this.width-5,20)},this.drawLives=function(t,i){var s=i.w;for(let e=0;e<t;e++)this.context.fillStyle=i.color,this.context.translate(s,i.h/2+5),this.context.beginPath(),this.context.moveTo(0,-i.h/2),this.context.lineTo(-i.w/2,i.h/2),this.context.lineTo(i.w/2,i.h/2),this.context.fill(),this.context.setTransform(1,0,0,1,0,0),s+=2*i.w},this.drawPaused=function(t){this.context.font="20px Turret Road",this.context.fillStyle="white",this.context.textAlign="center",this.context.fillText(t,this.width/2,this.height/2)},this.drawDiff=function(t){var i,s;1==t?(i=this.width/3,s=60):2==t?(i=this.width/2-10,s=80):(i=2*this.width/3,s=60),this.context.beginPath(),this.context.strokeStyle="white",this.context.lineWidth=1.2,this.context.rect(i-30,this.height/2+8,s,30),this.context.stroke(),this.context.font="20px Turret Road",this.context.fillStyle="white",this.context.textAlign="center",this.context.fillText("Easy",this.width/3,this.height/2+30),this.context.fillText("Normal",this.width/2,this.height/2+30),this.context.fillText("Hard",2*this.width/3,this.height/2+30)}}("game-canvas"),n=o.width,a=o.height;localStorage.getItem("high")||localStorage.setItem("high",0),document.getElementById("reset-high").addEventListener("click",(function(t){localStorage.setItem("high",0)}));let r=new class extends t{constructor(t,i){super(t,i,0,0,0,10),this.h=20,this.w=12,this.color="#FFFFFF",this.timeLastShoot=0}reset(t,i){this.setX(t/2),this.setY(i/2),this.setO(0),this.setDx(0),this.setDy(0)}shoot(t){var s=this.mathifyOrientation(),e=.5*Math.cos(s),h=-.5*Math.sin(s);return new i(this.x,this.y,e,h,t)}getBounds(){return[{x:this.x,y:this.y-this.h/2},{x:this.x+this.w/2,y:this.y+this.h/2},{x:this.x-this.w/2,y:this.y+this.h/2}]}}(n/2,a/2),c=[],l=[],d=new h("assets/Laser_Shoot.wav",.1),x=new h("assets/Explosion.wav",.25),f=[];window.onkeyup=t=>{f[t.code]=!1,p=!0},window.onkeydown=t=>{f[t.code]=!0,t.preventDefault()};const u=["TOP","RIGHT","BOTTOM","LEFT"];let w,m,y=!0,g=!0,p=!0,M="Choose your Difficulty.",D=new class{constructor(){this.arr=[1,2,3],this.diff=this.arr[0]}increaseDiff(){this.diff!=this.arr[2]&&this.diff++}decreaseDiff(){this.diff!=this.arr[0]&&this.diff--}getDiff(){return this.diff}},S=0,T=performance.now(),k=.01,v=0,F=performance.now(),P=()=>{w=1,m=2,y=!0,c=[],l=[],r.reset(n,a)},A=()=>{window.requestAnimationFrame(b)},b=()=>{if(y)performance.now()-F>1e3&&(f.Enter||f.KeyP)&&L(y),g||H();else{for(B(),I(),R();v>=k;)E(),v-=k;K()}g&&(H(),j()),A()},B=()=>{let t=performance.now(),i=t-T;T=t,v+=i},I=()=>{localStorage.getItem("high")<S&&localStorage.setItem("high",S),w<=60?w+=1:w=1,60==w&&S++,S%50==0&&60==w&&m++},R=()=>{if((f.KeyA||f.ArrowLeft)&&r.rotate(-2),(f.KeyD||f.ArrowRight)&&r.rotate(2),(f.KeyW||f.ArrowUp)&&r.accelerate(k),(f.KeyS||f.ArrowDown)&&r.decelerate(k),(f.Enter||f.KeyP)&&performance.now()-F>2e3&&L(y),f.Space){let t=performance.now();t-r.timeLastShoot>250&&(l.push(r.shoot(w)),r.timeLastShoot=t,d.play())}},E=()=>{c.length<Math.log(S)&&w%30==0&&C(),r.updatePosition(n,a,k),l.length>0&&l.forEach((t=>{t.updatePosition(n,a,k)})),c.length>0&&c.forEach((t=>{t.updatePosition(n,a,k)}));for(let t=0;t<c.length;t++)r.checkCollision(c[t])&&(x.play(),m>0?O():(M="Game Over. Choose your Difficulty for new game.",g=!0,P()));for(let t=0;t<l.length;t++)for(let i=0;i<c.length;i++)if(l[t].checkCollision(c[i])){l.splice(t,1);let s=c[i].split();0==s?(c.splice(i,1),S+=D.getDiff(),S%150<=D.getDiff()-1&&m++):(c.push(s[0]),c.push(s[1]),c.splice(i,1)),x.play();break}},O=()=>{r.reset(n,a),m--,c=[],l=[]},L=t=>{t?(y=!y,M="Paused",p=!1):(y=!y,p=!1)},C=()=>{let t,i=Math.floor(4*Math.random()),s=Math.floor(3*Math.random()+1),h=0,o=0,r=0,l=0;switch(u[i]){case"TOP":h=Math.random()*n,r=.2*Math.random(),l=.2*Math.random(),r*=1==Math.floor(2*Math.random())?1:-1,t=new e(h,0,r,l,s,6);break;case"RIGHT":o=Math.random()*a,r=-.2*Math.random(),l=.2*Math.random(),l*=1==Math.floor(2*Math.random())?1:-1,t=new e(n,o,r,l,s,6);break;case"BOTTOM":h=Math.random()*n,r=.2*Math.random(),l=-.2*Math.random(),r*=1==Math.floor(2*Math.random())?1:-1,t=new e(h,a,r,l,s,6);break;case"LEFT":o=Math.random()*a,r=.2*Math.random(),l=.2*Math.random(),l*=1==Math.floor(2*Math.random())?1:-1,t=new e(0,o,r,l,s,6)}c.push(t)},K=()=>{o.setBackground("#000000"),o.drawSpaceship(r);for(let t=0;t<c.length;t++)o.drawAsteroids(c[t],c[t].getBounds());for(let t=0;t<l.length;t++)l[t].checkDistance(w)?l.splice(t,1):o.drawBullets(l[t]);o.drawScore(S),o.drawHigh(localStorage.getItem("high")),o.drawLives(m,r)},j=()=>{(p&&f.KeyD||p&&f.ArrowRight)&&(D.increaseDiff(),p=!1),(p&&f.KeyA||p&&f.ArrowLeft)&&(D.decreaseDiff(),p=!1),(f.Enter||f.Space)&&(g=!g,S=0,P(),L(!1)),o.drawDiff(D.getDiff())},H=()=>{o.setBackground("#000000"),o.drawScore(S),o.drawHigh(localStorage.getItem("high")),o.drawLives(m,r),o.drawPaused(M)};P(),A()}},t=>{t(t.s=931)}]);